<script>
function collapse_expand(e) {
  e.stopPropagation();

  let el = e.target;

  while (!el.classList.contains('post')) {
    if (el.tagName == "A" ||
        el.tagName == "TEXTAREA" ||
        el.tagName == "BUTTON") return;
    console.log("considering", el);
    el = el.parentElement;
  }

  console.log("toggling", el);
  el.classList.toggle('collapsed');
}
for (let post of document.getElementsByClassName("post")) {
  post.onclick = collapse_expand;
}
</script>
